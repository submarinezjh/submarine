
ã€‹linuxæ–°å®‰è£…çš„è½¯ä»¶æˆ–è‡ªå·±å†™çš„ç¨‹åºï¼Œæ¯”å¦‚vsftpï¼Œå¦‚ä½•ç¡®ä¿æ¯æ¬¡ä¸Šç”µï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ‰§è¡Œï¼Ÿ


ã€ŠChatGPT è¯´ï¼š

å¥½é—®é¢˜ ğŸ‘ï¼Œè¿™æ¶‰åŠåˆ° Linux çš„å¼€æœºè‡ªå¯åŠ¨æœºåˆ¶ã€‚ä¸åŒå‘è¡Œç‰ˆå’Œå¹´ä»£æœ‰ä¸åŒæ–¹å¼ï¼Œå¤§ä½“åˆ†æˆä¸¤ç±»ï¼š

ğŸ”¹ 1. è€å¼æ–¹å¼ï¼ˆSysV initï¼Œè„šæœ¬åœ¨ /etc/init.d/ï¼‰

åƒä½ åˆšæ‰çœ‹åˆ°çš„ /etc/init.d/vsftpd å°±æ˜¯ SysV init å¯åŠ¨è„šæœ¬ã€‚

å¦‚æœå‘è¡Œç‰ˆè¿˜åœ¨ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç”¨ï¼š

sudo update-rc.d vsftpd defaults


æˆ–

sudo chkconfig vsftpd on


è¿™æ ·ç³»ç»Ÿä¸Šç”µ â†’ init â†’ è°ƒç”¨ /etc/init.d/vsftpd startã€‚

ğŸ”¹ 2. æ–°å¼æ–¹å¼ï¼ˆsystemdï¼‰

ç°åœ¨ä¸»æµ Linux (Ubuntu â‰¥ 16.04, CentOS 7+, Debian 8+) éƒ½ç”¨ systemd ä½œä¸ºåˆå§‹åŒ–ç³»ç»Ÿã€‚

è½¯ä»¶åŒ…å®‰è£…æ—¶ï¼ˆå¦‚ apt install vsftpdï¼‰ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª systemd service æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š

/lib/systemd/system/vsftpd.service


ä½ å¯ä»¥ç”¨ï¼š

sudo systemctl enable vsftpd   # å¼€æœºè‡ªå¯
sudo systemctl start vsftpd    # ç«‹å³å¯åŠ¨
sudo systemctl status vsftpd   # æŸ¥çœ‹çŠ¶æ€


è¿™æ ·æ¯æ¬¡ä¸Šç”µéƒ½ä¼šè‡ªåŠ¨è¿è¡Œã€‚

ğŸ”¹ 3. è‡ªå·±å†™çš„ç¨‹åº

å‡å¦‚ä½ å†™äº†ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº /usr/local/bin/myprogï¼Œæƒ³å¼€æœºè‡ªå¯ï¼Œå¯ä»¥é€‰æ‹©ï¼š

æ–¹æ³• Aï¼šå†™ systemd æœåŠ¡å•å…ƒ

åˆ›å»º /etc/systemd/system/myprog.serviceï¼š

[Unit]
Description=My Program Service
After=network.target

[Service]
ExecStart=/usr/local/bin/myprog
Restart=always

[Install]
WantedBy=multi-user.target


ç„¶åï¼š

sudo systemctl daemon-reload
sudo systemctl enable myprog
sudo systemctl start myprog

æ–¹æ³• Bï¼šæ”¾åˆ° /etc/rc.local

éƒ¨åˆ†ç³»ç»Ÿè¿˜æ”¯æŒåœ¨ /etc/rc.local é‡Œå†™å¯åŠ¨å‘½ä»¤ï¼š

/usr/local/bin/myprog &


ä½†è¿™ç§æ–¹æ³•è¾ƒè€ï¼Œsystemd ç³»ç»Ÿå¯èƒ½é»˜è®¤ç¦ç”¨ã€‚

æ–¹æ³• Cï¼šç”¨æˆ·çº§è‡ªå¯ï¼ˆé€‚åˆå¼€å‘ï¼‰

å¦‚æœæ˜¯ç”¨æˆ·çº§ç¨‹åºï¼Œå¯ä»¥åœ¨ ~/.bashrc æˆ– ~/.profile åŠ ä¸Šï¼š

/usr/local/bin/myprog &


è¿™æ ·ç”¨æˆ·ä¸€ç™»å½•å°±è¿è¡Œï¼Œä½† ä¸æ˜¯çº¯ç²¹çš„å¼€æœºè‡ªå¯ã€‚

ğŸ”¹ 4. åµŒå…¥å¼ Linux ç‰¹æ®Šæƒ…å†µ

åœ¨åµŒå…¥å¼ Linuxï¼ˆæ¯”å¦‚ OpenWrtã€Yocto ç³»ç»Ÿï¼‰é‡Œï¼š

å¯èƒ½æ²¡æœ‰ systemdï¼Œå¸¸ç”¨ init è„šæœ¬ æˆ– /etc/rc.localã€‚

Yocto ä¹Ÿæ”¯æŒ systemdï¼Œä½†è¦çœ‹æ„å»ºæ—¶å¯æ²¡å¯ã€‚

âœ… æ€»ç»“ï¼š

å‘è¡Œç‰ˆè‡ªå¸¦æœåŠ¡ï¼ˆå¦‚ vsftpdï¼‰ â†’ systemctl enable vsftpdã€‚

è‡ªå·±å†™çš„ç¨‹åº â†’ å»ºè®®å†™æˆ systemd serviceï¼Œæœ€é€šç”¨å¯é ã€‚